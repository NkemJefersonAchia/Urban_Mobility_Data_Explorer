/* ============================================================
    NYC Mobility Explorer - Design System
    ============================================================ */

:root {
     --font-display: 'Newsreader', Georgia, serif;
     --font-mono: 'IBM Plex Mono', 'Courier New', monospace;
     --font-sans: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
     
     --text-xs: 0.75rem;
     --text-sm: 0.875rem;
     --text-base: 1rem;
     --text-lg: 1.125rem;
     --text-xl: 1.5rem;
     --text-2xl: 2rem;
     --text-3xl: 2.5rem;
     
     --color-ink: #1a1a1a;
     --color-ink-light: #404040;
     --color-ink-lighter: #666666;
     
     --color-paper: #fafaf8;
     --color-paper-dark: #f2f2ed;
     --color-paper-darker: #e8e8e0;
     
     --color-accent-primary: #d84315;
     --color-accent-secondary: #0277bd;
     --color-accent-tertiary: #558b2f;
     
     --color-chart-1: #d84315;
     --color-chart-2: #0277bd;
     --color-chart-3: #558b2f;
     --color-chart-4: #f57c00;
     --color-chart-5: #5e35b1;
     --color-chart-6: #00838f;
     
     --space-1: 0.25rem;
     --space-2: 0.5rem;
     --space-3: 0.75rem;
     --space-4: 1rem;
     --space-5: 1.5rem;
     --space-6: 2rem;
     --space-8: 3rem;
     --space-10: 4rem;
     
     --radius-sm: 2px;
     --radius-md: 4px;
     
     --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.06);
     --shadow-md: 0 2px 4px rgba(0, 0, 0, 0.08);
     --shadow-lg: 0 4px 8px rgba(0, 0, 0, 0.1);
     
     --transition-base: cubic-bezier(0.4, 0.0, 0.2, 1);
     --transition-fast: 150ms var(--transition-base);
     --transition-normal: 250ms var(--transition-base);
}

/* ============================================================
    BASE STYLES
    ============================================================ */

* {
     margin: 0;
     padding: 0;
     box-sizing: border-box;
}

html {
     font-size: 16px;
     -webkit-font-smoothing: antialiased;
     -moz-osx-font-smoothing: grayscale;
}

body {
     font-family: var(--font-sans);
     font-size: var(--text-base);
     line-height: 1.6;
     color: var(--color-ink);
     background-color: var(--color-paper);
}

/* ============================================================
    TYPOGRAPHY
    ============================================================ */

h1, h2, h3, h4, h5, h6 {
     font-family: var(--font-display);
     font-weight: 600;
     line-height: 1.2;
     margin-bottom: var(--space-4);
}

.site-title {
     font-size: var(--text-2xl);
     font-weight: 600;
     margin-bottom: var(--space-1);
     letter-spacing: -0.02em;
}

.site-subtitle {
     font-family: var(--font-mono);
     font-size: var(--text-sm);
     color: var(--color-ink-lighter);
     text-transform: uppercase;
     letter-spacing: 0.05em;
}

.section-title {
     font-size: var(--text-xl);
     margin-bottom: var(--space-6);
     padding-bottom: var(--space-3);
     border-bottom: 2px solid var(--color-ink);
}

/* ============================================================
    LAYOUT
    ============================================================ */

.container {
     max-width: 1400px;
     margin: 0 auto;
     padding: 0 var(--space-6);
}

/* ============================================================
    HEADER
    ============================================================ */

.main-header {
     background-color: var(--color-paper-dark);
     border-bottom: 1px solid var(--color-paper-darker);
     position: sticky;
     top: 0;
     z-index: 100;
     backdrop-filter: blur(8px);
}

.header-content {
     display: flex;
     justify-content: space-between;
     align-items: center;
     padding: var(--space-5) 0;
}

.header-nav {
     display: flex;
     gap: var(--space-2);
}

.nav-btn {
     font-family: var(--font-mono);
     font-size: var(--text-sm);
     padding: var(--space-2) var(--space-4);
     background-color: transparent;
     border: 1px solid transparent;
     color: var(--color-ink-light);
     cursor: pointer;
     transition: all var(--transition-fast);
     text-transform: uppercase;
     letter-spacing: 0.05em;
}

.nav-btn:hover {
     color: var(--color-ink);
     background-color: var(--color-paper-darker);
}

.nav-btn.active {
     color: var(--color-accent-primary);
     border-bottom: 2px solid var(--color-accent-primary);
}

/* ============================================================
    MAIN CONTENT
    ============================================================ */

.main-content {
     min-height: calc(100vh - 200px);
}

.view-section {
     display: none;
     padding: var(--space-8) 0;
     animation: fadeIn var(--transition-normal);
}

.view-section.active {
     display: block;
}

@keyframes fadeIn {
     from {
          opacity: 0;
          transform: translateY(8px);
     }
     to {
          opacity: 1;
          transform: translateY(0);
     }
}

/* ============================================================
    STATS GRID
    ============================================================ */

.stats-grid {
     display: grid;
     grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
     gap: var(--space-5);
     margin-bottom: var(--space-8);
}

.stat-card {
     background-color: white;
     padding: var(--space-5);
     border: 1px solid var(--color-paper-darker);
     transition: transform var(--transition-fast), box-shadow var(--transition-fast);
}

.stat-card:hover {
     transform: translateY(-2px);
     box-shadow: var(--shadow-md);
}

.stat-label {
     font-family: var(--font-mono);
     font-size: var(--text-xs);
     color: var(--color-ink-lighter);
     text-transform: uppercase;
     letter-spacing: 0.08em;
     margin-bottom: var(--space-2);
}

.stat-value {
     font-family: var(--font-display);
     font-size: var(--text-3xl);
     font-weight: 600;
     color: var(--color-ink);
     margin-bottom: var(--space-1);
}

.stat-change {
     font-size: var(--text-sm);
     color: var(--color-ink-light);
}

/* ============================================================
    INSIGHTS SECTION
    ============================================================ */

.insights-section {
     margin-bottom: var(--space-8);
}

.insights-grid {
     display: grid;
     grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
     gap: var(--space-5);
}

.insight-card {
     background-color: white;
     padding: var(--space-6);
     border-left: 3px solid var(--color-accent-primary);
     border-top: 1px solid var(--color-paper-darker);
     border-right: 1px solid var(--color-paper-darker);
     border-bottom: 1px solid var(--color-paper-darker);
}

.insight-icon {
     font-size: var(--text-2xl);
     margin-bottom: var(--space-3);
}

.insight-title {
     font-size: var(--text-lg);
     margin-bottom: var(--space-3);
}

.insight-text {
     color: var(--color-ink-light);
     line-height: 1.7;
     margin-bottom: var(--space-4);
}

.insight-data {
     display: flex;
     flex-direction: column;
     gap: var(--space-2);
     padding-top: var(--space-3);
     border-top: 1px solid var(--color-paper-darker);
}

.data-point {
     font-family: var(--font-mono);
     font-size: var(--text-sm);
     color: var(--color-ink-lighter);
}

.data-point strong {
     color: var(--color-ink);
     font-weight: 600;
}

/* ============================================================
    CHARTS
    ============================================================ */

.charts-row,
.charts-grid {
     display: grid;
     gap: var(--space-5);
     margin-bottom: var(--space-8);
}

.charts-row {
     grid-template-columns: repeat(auto-fit, minmax(450px, 1fr));
}

.charts-grid {
     grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
}

.chart-card {
     background-color: white;
     padding: var(--space-6);
     border: 1px solid var(--color-paper-darker);
}

.chart-card.full-width {
     grid-column: 1 / -1;
}

.chart-title {
     font-size: var(--text-lg);
     margin-bottom: var(--space-5);
     padding-bottom: var(--space-3);
     border-bottom: 1px solid var(--color-paper-darker);
}

.chart-container {
     position: relative;
     height: 300px;
}

.chart-container.large {
     height: 400px;
}

/* ============================================================
    FILTERS
    ============================================================ */

.filter-bar {
     display: flex;
     align-items: center;
     gap: var(--space-4);
     padding: var(--space-5);
     background-color: white;
     border: 1px solid var(--color-paper-darker);
     margin-bottom: var(--space-6);
}

.filter-group {
     display: flex;
     align-items: center;
     gap: var(--space-3);
}

.filter-group label {
     font-family: var(--font-mono);
     font-size: var(--text-sm);
     color: var(--color-ink-lighter);
     text-transform: uppercase;
     letter-spacing: 0.05em;
}

.filter-input,
.control-select {
     font-family: var(--font-mono);
     font-size: var(--text-sm);
     padding: var(--space-2) var(--space-3);
     border: 1px solid var(--color-paper-darker);
     background-color: var(--color-paper);
     color: var(--color-ink);
     transition: border-color var(--transition-fast);
}

.filter-input:focus,
.control-select:focus {
     outline: none;
     border-color: var(--color-accent-primary);
}

.filter-separator {
     color: var(--color-ink-lighter);
}

.filter-btn {
     font-family: var(--font-mono);
     font-size: var(--text-sm);
     padding: var(--space-2) var(--space-5);
     background-color: var(--color-accent-primary);
     color: white;
     border: none;
     cursor: pointer;
     text-transform: uppercase;
     letter-spacing: 0.05em;
     transition: background-color var(--transition-fast), transform var(--transition-fast);
}

.filter-btn:hover {
     background-color: #bf360c;
     transform: translateY(-1px);
}

.filter-btn.secondary {
     background-color: transparent;
     color: var(--color-ink-light);
     border: 1px solid var(--color-paper-darker);
}

.filter-btn.secondary:hover {
     background-color: var(--color-paper-darker);
     border-color: var(--color-ink-lighter);
}

/* ============================================================
    MAP CONTROLS
    ============================================================ */

.map-controls {
     display: flex;
     gap: var(--space-5);
     padding: var(--space-5);
     background-color: white;
     border: 1px solid var(--color-paper-darker);
     margin-bottom: var(--space-6);
}

.control-group {
     display: flex;
     flex-direction: column;
     gap: var(--space-2);
}

.control-group label {
     font-family: var(--font-mono);
     font-size: var(--text-xs);
     color: var(--color-ink-lighter);
     text-transform: uppercase;
     letter-spacing: 0.05em;
}

/* ============================================================
    SPATIAL SECTION
    ============================================================ */

.spatial-grid {
     display: grid;
     grid-template-columns: 1.5fr 1fr;
     gap: var(--space-5);
}

.zone-table-card {
     background-color: white;
     padding: var(--space-6);
     border: 1px solid var(--color-paper-darker);
}

.table-container {
     max-height: 500px;
     overflow-y: auto;
     border: 1px solid var(--color-paper-darker);
}

.data-table {
     width: 100%;
     border-collapse: collapse;
     font-family: var(--font-mono);
     font-size: var(--text-sm);
}

.data-table thead {
     position: sticky;
     top: 0;
     background-color: var(--color-paper-dark);
     z-index: 10;
}

.data-table th {
     padding: var(--space-3);
     text-align: left;
     font-weight: 600;
     color: var(--color-ink);
     border-bottom: 2px solid var(--color-paper-darker);
     text-transform: uppercase;
     letter-spacing: 0.05em;
     font-size: var(--text-xs);
}

.data-table td {
     padding: var(--space-3);
     border-bottom: 1px solid var(--color-paper-darker);
     color: var(--color-ink-light);
}

.data-table tr:hover {
     background-color: var(--color-paper);
}

.loading-row {
     text-align: center;
     padding: var(--space-6) !important;
     color: var(--color-ink-lighter);
}

/* ============================================================
    FINANCIAL SECTION
    ============================================================ */

.financial-grid {
     display: grid;
     grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
     gap: var(--space-5);
     margin-bottom: var(--space-8);
}

.financial-card {
     background-color: white;
     padding: var(--space-6);
     border: 1px solid var(--color-paper-darker);
     text-align: center;
}

.financial-icon {
     font-size: var(--text-3xl);
     margin-bottom: var(--space-3);
}

.financial-label {
     font-family: var(--font-mono);
     font-size: var(--text-sm);
     color: var(--color-ink-lighter);
     text-transform: uppercase;
     letter-spacing: 0.08em;
     margin-bottom: var(--space-3);
}

.financial-value {
     font-family: var(--font-display);
     font-size: var(--text-2xl);
     font-weight: 600;
     color: var(--color-accent-secondary);
}

/* ============================================================
    FOOTER
    ============================================================ */

.main-footer {
     background-color: var(--color-paper-dark);
     border-top: 1px solid var(--color-paper-darker);
     padding: var(--space-8) 0;
     margin-top: var(--space-10);
}

.footer-content {
     text-align: center;
}

.footer-text {
     font-family: var(--font-mono);
     font-size: var(--text-sm);
     color: var(--color-ink-lighter);
     margin-bottom: var(--space-2);
}

/* ============================================================
    LOADING OVERLAY
    ============================================================ */

.loading-overlay {
     position: fixed;
     top: 0;
     left: 0;
     width: 100%;
     height: 100%;
     background-color: rgba(250, 250, 248, 0.95);
     display: flex;
     flex-direction: column;
     align-items: center;
     justify-content: center;
     z-index: 1000;
     opacity: 1;
     transition: opacity var(--transition-normal);
}

.loading-overlay.hidden {
     opacity: 0;
     pointer-events: none;
}

.loading-spinner {
     width: 48px;
     height: 48px;
     border: 3px solid var(--color-paper-darker);
     border-top-color: var(--color-accent-primary);
     border-radius: 50%;
     animation: spin 0.8s linear infinite;
}

@keyframes spin {
     to { transform: rotate(360deg); }
}

.loading-text {
     margin-top: var(--space-4);
     font-family: var(--font-mono);
     font-size: var(--text-sm);
     color: var(--color-ink-lighter);
     text-transform: uppercase;
     letter-spacing: 0.1em;
}

/* ============================================================
    RESPONSIVE DESIGN
    ============================================================ */

@media (max-width: 1024px) {
     .spatial-grid {
          grid-template-columns: 1fr;
     }
     
     .charts-row {
          grid-template-columns: 1fr;
     }
}

@media (max-width: 768px) {
     .container {
          padding: 0 var(--space-4);
     }
     
     .header-content {
          flex-direction: column;
          gap: var(--space-4);
          align-items: flex-start;
     }
     
     .header-nav {
          width: 100%;
          overflow-x: auto;
     }
     
     .stats-grid {
          grid-template-columns: 1fr;
     }
     
     .insights-grid {
          grid-template-columns: 1fr;
     }
     
     .charts-grid {
          grid-template-columns: 1fr;
     }
     
     .filter-bar {
          flex-direction: column;
          align-items: stretch;
     }
     
     .filter-group {
          flex-direction: column;
          align-items: stretch;
     }
}

/* ============================================================
    UTILITY CLASSES
    ============================================================ */

.hidden {
     display: none !important;
}

.text-accent {
     color: var(--color-accent-primary);
}

.text-secondary {
     color: var(--color-accent-secondary);
}
